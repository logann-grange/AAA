<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="refresh" content="30">
<title>Dashboard Monitoring – Challenge Triple A</title>
<link rel="stylesheet" href="template.css">
</head>
<body>

<header role="banner" aria-label="En-tête principal">
    <h1>Dashboard Monitoring – Challenge Triple A</h1>
    <p>Démarré le : {{ start_time }}</p>
</header>

<main role="main" aria-label="Contenu principal du tableau de bord">
    <div class="dashboard">

        <!-- SYSTÈME -->
        <section aria-labelledby="system-title">
            <h2 id="system-title">Système</h2>
            <img src="./Images/icons8-paramètres.png" alt="Icône paramètres">
            <p>Nom de la machine : {{ system_name }}</p>
            <p>Système d’exploitation : {{ system_os }}</p>
            <p>Architecture : {{ system_arch }}</p>
            <p>Heure de démarrage : {{ start_time }}</p>
            <p>Uptime : {{ uptime_day }} jours, {{ uptime_hour }} h, {{ uptime_min }} min</p>
            <p>Nombre d’utilisateurs connectés : {{ users_nb }}</p>
            <p>Adresse IP principale : {{ ip }}</p>

            <h3>Charge système</h3>
            <p>Load 1 min : {{ load1 }}</p>
            <p>Load 5 min : {{ load5 }}</p>
            <p>Load 15 min : {{ load15 }}</p>
        </section>

        <!-- CPU -->
        <section aria-labelledby="cpu-title">
            <h2 id="cpu-title">CPU</h2>
            <img src="./Images/icons8-cpu-50.png" alt="Icône CPU">

            <p>Nombre de cœurs : {{ nb_core }}</p>
            <p>Fréquence actuelle : {{ cpu_freq }} MHz</p>

            <h3>Utilisation globale</h3>
            <div class="gauge" aria-label="Utilisation CPU">
                <div class="gauge-bg {{ cpu_color }}"></div>
                <div class="gauge-needle" style="transform: rotate({{ cpu_usage * 1.8 }}deg);"></div>
                <div class="gauge-center"></div>
                <div class="gauge-value">{{ cpu_usage }}%</div>
            </div>

            <h3>Utilisation par cœur</h3>
            <div class="cores-gauges">
                {% for i in range(nb_core) %}
                <div class="gauge" aria-label="Cœur {{ i+1 }}">
                    <div class="gauge-bg {{ core_colors[i] }}"></div>
                    <div class="gauge-needle" style="transform: rotate({{ core_percent[i] * 1.8 }}deg);"></div>
                    <div class="gauge-center"></div>
                    <div class="gauge-value">{{ core_percent[i] }}%</div>
                    <p>Cœur {{ i+1 }}</p>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- RAM -->
        <section aria-labelledby="ram-title">
            <h2 id="ram-title">Mémoire RAM</h2>
            <img src="./Images/icons8-ram-60.png" alt="Icône RAM">

            <h3>Utilisation RAM</h3>
            <div class="gauge" aria-label="Utilisation RAM">
                <div class="gauge-bg {{ ram_color }}"></div>
                <div class="gauge-needle" style="transform: rotate({{ ram_percent * 1.8 }}deg);"></div>
                <div class="gauge-center"></div>
                <div class="gauge-value">{{ ram_percent }}%</div>
            </div>
            <p>RAM totale : {{ ram_total }} Go</p>
            <p>RAM utilisée : {{ ram_usage }} Go</p>
        </section>

        <!-- PROCESSUS -->
        <section aria-labelledby="process-title">
            <h2 id="process-title">Top 3 des processus</h2>
            <img src="./Images/icons8-tableau-de-bord-50.png" alt="Icône tableau de bord">

            <h3>CPU</h3>
            <ul>
                {% for p in cpu_process %}
                <li>{{ loop.index }}. {{ p.nom }} — CPU : {{ p.cpu }}% — RAM : {{ p.ram }}%</li>
                {% endfor %}
            </ul>

            <h3>RAM</h3>
            <ul>
                {% for p in ram_process %}
                <li>{{ loop.index }}. {{ p.nom }} — RAM : {{ p.ram }}% — CPU : {{ p.cpu }}%</li>
                {% endfor %}
            </ul>
        </section>

        <!-- FICHIERS -->
        <section aria-labelledby="files-title">
            <h2 id="files-title">Analyse des fichiers</h2>
            <img src="./Images/icons8-dossier-50.png" alt="Icône dossier">
            <p>Nombre total de fichiers analysés : {{ files_count | sum }}</p>

            <h3>Répartition par type de fichiers et espace occupé</h3>
            <ul>
                {% set extensions = ['.txt', '.py', '.pdf', '.jpg', '.html', '.png', '.css', '.mp3', '.mp4', '.zip'] %}
                {% for ext, count, percent, size in zip(extensions, files_count, percent_file_list, size_file_list) %}
                <li>{{ ext }} : {{ count }} fichiers ({{ percent | round(2) }}%) — {{ size }}</li>
                {% endfor %}
            </ul>

            <h3>Top 5 fichiers les plus volumineux</h3>
            <ul>
                {% for f, s in zip(top_size_file_list[0], top_size_file_list[1]) %}
                <li>{{ f }} — {{ s }}</li>
                {% endfor %}
            </ul>
        </section>

    </div>
</main>

<footer role="contentinfo" aria-label="Pied de page">
    <p>Challenge Triple A — Projet pédagogique — Gaïa, Logann, Anna</p>
</footer>

</body>
</html>
